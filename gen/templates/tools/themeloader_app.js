(async () => {
const { Util, HtmlUtil } = PlexiOS;
const APP_RAW_IMAGE_DATA = await Util.loadImageB64Lookup({

  'icon.png': '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',
});

const TITLE = "Theme Loader";

const APP_MAIN = async (os, procInfo, args) => {
  const { pid } = procInfo;

  let fs = os.FileSystem(procInfo.cwd);
  let themeData = await fs.getVirtualJsInfo(args[0] || '');
  if (!themeData.isValid || themeData.category !== 'theme') {
    await os.Shell.DialogFactory.showOkCancelToBool(pid, TITLE, "The given path does not exist or is not a valid theme file.");
    return;
  }

  await os.Themes.setActiveTheme(themeData.id);
};
PlexiOS.registerJavaScript('app', 'io.plexi.tools.themeloader', APP_MAIN);
})();
